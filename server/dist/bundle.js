(()=>{"use strict";var e={963:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,o)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(s(37)),c=i(s(829)),u=i(s(517)),l=new a.default.Schema({name:{type:String,trim:!0,required:[!0,"Please provide a name"],minlength:3,maxlength:56},email:{type:String,unique:!0,match:[/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please provide a valid email"]},password:{type:String,minlength:6,required:!1},birthday:{type:String,required:!1},picture:{type:String,required:!1}},{timestamps:!0}),d=process.env.JWT_ACCESS_TOKEN_SECRET,f=process.env.JWT_LIFETIME;l.methods.generateToken=function(){return c.default.sign({id:this._id,email:this.email,name:this.name},d,{expiresIn:f})};const{conn:p}=(0,u.default)();let _=a.Model;if(!p)throw console.error("Failed to connect to the database"),new Error("Database connection failed");_=p.models.User||p.model("User",l),t.default=_},997:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,o)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return o(t,e),t},i=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=r(s(818)),u=a(s(252)),l=a(s(963)),d=a(s(577)),f=a(s(977)),p=a(s(898)),_=a(s(151)),h=a(s(103)),v=a(s(992)),m=a(s(188)),g=a(s(245)),y=a(s(729)),E=a(s(829)),O=a(s(479)),k=a(s(37)),T=a(s(938)),j=a(s(407)),b=s(518);c.config();const w={origin:`${process.env.LOCAL_HOST_CLIENT}`,methods:"GET,POST,PUT,PATCH,DELETE,HEAD",credentials:!0,optionsSuccessStatus:200},S=(0,u.default)();S.use(u.default.json()),S.use(u.default.urlencoded({extended:!0})),S.use((0,d.default)(w)),S.use((0,p.default)(process.env.COOKIES_SECRET_KEY)),S.use((0,f.default)({secret:process.env.SESSION_SECRET_TOKEN,resave:!1,saveUninitialized:!1,store:O.default.create({mongoUrl:"mongodb+srv://zedcurl1:8vu3UFpUsknGZbr2@merncrud.h6dnvjx.mongodb.net/sessionStore?retryWrites=true&w=majority&appName=merncrud"}),cookie:{secure:!0,httpOnly:!0}}));const P=new b.MongoClient("mongodb+srv://zedcurl1:8vu3UFpUsknGZbr2@merncrud.h6dnvjx.mongodb.net/?retryWrites=true&w=majority&appName=merncrud"),x="CredentialEmailVerification",C="userEmailVerificationData",M=process.env.GOOGLE_CLIENT_ID,A=process.env.GOOGLE_CLIENT_SECRET,L=process.env.GOOGLE_ACCESS_TOKEN_URL,I=process.env.GOOGLE_TOKEN_INFO_URL,N=`${process.env.LOCAL_HOST_CLIENT}`;S.get("/google/callback",((e,t)=>i(void 0,void 0,void 0,(function*(){const s={code:e.query.code,client_id:M,client_secret:A,redirect_uri:`${process.env.LOCAL_HOST_SERVER}/google/callback`,grant_type:"authorization_code"};try{const e=yield fetch(L,{method:"POST",body:JSON.stringify(s)}),n=yield e.json(),{access_token:o,refresh_token:r,id_token:i,expires_in:a}=n,c=yield fetch(`${I}?id_token=${i}`),u=yield c.json(),{email:d,name:f,picture:p}=u;let _=yield l.default.findOne({email:d}).select("-password");return _||(_=yield l.default.create({name:f,email:d,picture:p})),t.cookie("access_token",o,{httpOnly:!0,secure:!0,sameSite:"none",maxAge:1e3*a}),t.cookie("refresh_token",r,{httpOnly:!0,secure:!0,sameSite:"none"}),t.redirect(`${N}`)}catch(e){return console.error("ErroreExchanging authentication code for token: ",e),t.status(500).send("Authentication failed")}})))),S.get("/api/test",((e,t)=>i(void 0,void 0,void 0,(function*(){const s=e.cookies.refresh_token,n=e.cookies.access_token;return t.json({refreshToken:s,accessToken:n})})))),S.get("/authentication-status",h.default,((e,t)=>i(void 0,void 0,void 0,(function*(){try{const{access_token:s}=e.cookies,n=yield(0,_.default)(s),o=null==n?void 0:n.verify_access_token_response;return(null==o?void 0:o.ok)?t.status(null==o?void 0:o.status).json({authenticated:null==o?void 0:o.ok,message:"success"}):t.status(null==o?void 0:o.status).json({authenticated:null==o?void 0:o.ok,message:"error"})}catch(e){console.error("Error checking for authenticated status")}})))),S.get("/signout",((e,t)=>i(void 0,void 0,void 0,(function*(){try{let s=!1;return e.session.destroy((e=>{e&&(s=!0)})),s?t.status(500).json({message:"Logout failed",status:500,success:!1}):(t.clearCookie("connect.sid"),t.clearCookie("access_token"),t.clearCookie("refresh_token"),t.status(200).json({message:"success",status:200,success:!0}))}catch(e){console.error(`error occur while signing out: ${e}`)}})))),S.get("/user-profile",((e,t)=>i(void 0,void 0,void 0,(function*(){try{const{access_token:s}=e.cookies,n=yield(0,v.default)(s);if(n){const{verify_access_token_data:e}=n,{email:s}=e,o=yield l.default.findOne({email:s}).select("-password");t.status(200).json({user:o})}else t.status(400).json({user:"no profile provided"})}catch(e){console.error("Error occur in user-profile response handler")}})))),S.post("/credential-register",((e,t)=>i(void 0,void 0,void 0,(function*(){try{const s=e.body,{fullname:n,email:o,birthDate:r,password:i,confirmPassword:a}=s,c=/^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/,u=/^[A-Za-z]+(?:[-'\s][A-Za-z]+)* [A-Za-z]+(?:[-'\s][A-Za-z]+)*$/,d=[];if(i&&i===a?d.push(...(0,m.default)(i)):d.push("Valid passwords must be provided"),o?c.test(o)||d.unshift("Invalid email"):d.unshift("Valid email must be provided"),n?u.test(n)||d.unshift("Your full name must provided. e.g John Doe"):d.unshift("Valid name must be provided"),Array.isArray(d)&&0===d.length){const{message:s,success:a,user:c}=yield(0,g.default)(o);if(!a)return t.status(201).json({message:s,success:a,user:c});const u=y.default.hashSync(i,10),d=yield l.default.create({name:n,email:o,password:u,birthday:r});e.session.user={id:null==d?void 0:d._id,name:null==d?void 0:d.name,email:d.email};const f={id:d._id,email:d.email,name:d.name},p=process.env.JWT_REFRESH_TOKEN_SECRET;if(d)try{const e=d.generateToken(),s=E.default.sign(f,p);yield P.connect();const n=P.db("SessionVerification").collection("userSessionVerification");return yield n.insertOne({access_token:e,refresh_token:s,payload:f,createAt:new Date}),t.status(200).json({message:["User have been succefully registered"],success:!0,credential_access_token:e,credential_refresh_token:s})}catch(e){return t.status(500).json({message:["Internal server error"],success:!1})}return t.status(500).json({message:["Internal server error"],success:!1})}return t.status(203).json({message:d,success:!1})}catch(e){console.error("Error handling user credentials body!")}})))),S.post("/signin",((e,t)=>i(void 0,void 0,void 0,(function*(){var s;try{const{email:s,password:n}=e.body,o=yield l.default.findOne({email:s});if(o&&y.default.compareSync(n,o.password)){const s={id:o._id,email:o.email,name:o.name},n=E.default.sign(s,process.env.JWT_ACCESS_TOKEN_SECRET),r=E.default.sign(s,process.env.JWT_REFRESH_TOKEN_SECRET);return n&&r?(e.session.user=s,e.session.refreshToken=r,e.session.accessToken=n,t.status(200).json({name:o.name,message:["Sign in successful"],success:!0,status:200,access_token:n,refresh_token:r})):t.status(500).json({message:["Unexpected error occured :( . Try again later!"],success:!1,status:500})}return t.status(500).json({message:["Invalid email or password!"],success:!1,status:500})}catch(e){if(e instanceof k.default.Error.ValidationError){const n=[];for(const t in e.errors)n.push(null===(s=e.errors[t])||void 0===s?void 0:s.message);return t.status(404).json({message:n,success:!1,status:500})}t.status(404).json({message:["Ooops!, unable to sign you in","This error can also occur when you have already registered using gmail and now you are tring to use email and password.","May be try using your gmail to signin"],success:!1,status:500})}}))));const R=process.env.GOOGLE_MAPS_API_KEY;S.get("/maps-api",((e,t)=>i(void 0,void 0,void 0,(function*(){try{const e=yield T.default.get(`https://maps.googleapis.com/maps/api/js?key=${R}&loading=async`);t.setHeader("Content-Type","text/javascript"),t.send(e.data)}catch(e){console.error("Error fetching the Google Maps API:",e),t.status(500).send("Error fetching the Google Maps API")}})))),S.post("/authenticate",((e,t)=>i(void 0,void 0,void 0,(function*(){const{username:s}=e.body;try{const e=yield T.default.put("https://api.chatengine.io/users/",{username:s,secret:s,first_name:s},{headers:{"Private-Key":process.env.CHAT_ENGINE_IO_SECRET}});return t.status(e.status).json(e.data)}catch(e){console.log(e)}})))),S.post("/api/send-verification-email",((e,t)=>i(void 0,void 0,void 0,(function*(){try{const{fullname:s,email:n,birthDate:o,password:r}=e.body,i={fullname:s,email:n,birth_day:o,password:r};console.log("1st log: ",i);const{message:a,success:c,user:u}=yield(0,g.default)(n);if(console.log("2nd log: ",a," : ",c," : ",u),!c)return t.status(201).json({message:a,success:c,user:u});console.log("2nd loggy: ",a," : ",c," : ",u);const{tempData:l,token:d}=yield(0,j.default)(n,r);if(console.log("3rd log: ",l," : ",d),!d||!l)return console.log("8th log: "),t.status(500).json({message:["Failed to send the email!"],success:!1});console.log("4th log: ",l," : ",d);try{console.log("5th log: ",l," : ",d),yield P.connect();const e=P.db(x).collection(C);return yield e.insertOne({data:i,token:d,createAt:new Date}),console.log("6th log: ",e),t.status(200).json({message:["Email send successfully!"],success:!0})}catch(e){return console.log("7th log: "),t.status(500).json({message:["Internal server error!"],success:!0})}}catch(e){return console.log("9th log: "),t.status(500).json({message:["Failed to send the email!"],success:!1})}})))),S.get("/api/verify-email",((e,t)=>i(void 0,void 0,void 0,(function*(){const s=e.query.token,n=process.env.MAIL_TOKEN;try{if(!E.default.verify(s,n))return t.status(500).json({message:["Email verification failed, possibly the link is invalid or expired"],success:!1});yield P.connect();const e=P.db(x).collection(C),o=yield e.findOne({token:s});if(!o)return t.status(500).json({message:["Email verification failed, possibly the link is invalid or expired"],success:!1});{const{data:e}=o,s={fullname:e.fullname,email:e.email,birthDay:e.birth_day,password:e.password,confirmPassword:e.password};try{const e=yield fetch(`${process.env.LOCAL_HOST_SERVER}/credential-register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!e.ok)return t.status(500).json({message:["Ooops! error occur occur while registering!. Try again"],success:!1});const{message:n,success:o,credential_access_token:r,credential_refresh_token:i}=yield e.json();return t.status(200).json({message:n,success:o,credential_access_token:r,credential_refresh_token:i})}catch(e){return t.status(500).json({message:["Internal server error!. Try again"],success:!1})}}}catch(e){return t.status(500).json({message:["Error verifying token"],success:!1})}}))));const D=process.env.PORT||4e3;var G;G=D,S.listen(G,(()=>{console.log(`Listening on port ${G}`)}))},245:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(963));t.default=e=>n(void 0,void 0,void 0,(function*(){try{const t=yield r.default.findOne({email:e}).select("-password");return t?{message:[`User with the same email '${e}' exist. You can proceed to signin.`],success:!1,user:t}:{message:["User not found"],success:!0,user:t}}catch(e){console.error("Error occur accessing user from database")}}))},992:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(s(151));t.default=e=>{try{return(0,o.default)(e)}catch(e){console.error("Error fetching user profile")}}},407:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(829)),i=o(s(572)),a=o(s(818)),c=o(s(928)),u=o(s(896)),l=o(s(577)),d=o(s(252));a.default.config();const f={origin:`${process.env.LOCAL_HOST_CLIENT}`,methods:"GET,POST,PUT,PATCH,DELETE,HEAD",credentials:!0,optionsSuccessStatus:200},p=(0,d.default)();p.use(d.default.json()),p.use(d.default.urlencoded({extended:!0})),p.use((0,l.default)(f)),t.default=(e,t)=>n(void 0,void 0,void 0,(function*(){const s=process.env.MAIL_TOKEN;console.log("Mail Token: ",s);const n={host:"smtp.gmail.com",port:587,secure:!0,auth:{user:"armstrongspycon27@gmail.com",pass:process.env.GMAIL_APP_PASSWORD}};console.log("Mail Token Auth: ",n);const o=i.default.createTransport(n),a=r.default.sign({email:e,password:t},s,{expiresIn:"24h"}),l=c.default.resolve(__dirname,"emailTemplate.html");console.log("Template Path: ",l);try{const t=u.default.readFileSync(l,"utf-8");console.log("HTML Template: ",t);const s=process.env.LOCAL_HOST_CLIENT;console.log("CLIENT: ",s);const n=t.replace("{{client}}",s).replace("{{token}}",a);console.log("HTML Content: ",n);const r={from:"armstrongspycon27@gmail.com",to:e,subject:"Welcome to Duplex",html:n};let i;console.log("MAIL OPTIONS: ",r);let c=0;const d=5,f=e=>1e3*Math.pow(2,e);return new Promise(((e,t)=>{const s=()=>{o.sendMail(r,((n,o)=>{n?c<d?(c++,console.log(`Attempt ${c} failed. Retrying in ${f(c)} ms...`),setTimeout(s,f(c))):(i=void 0,console.log("Error :",n),t({tempData:i,token:a})):(console.log("Success: "),i=o,e({tempData:i,token:a}))}))};s()}))}catch(e){throw console.error("Error reading email template:",e),e}}))},517:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,o)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(s(37));r(s(818)).config(),t.default=()=>{var e;try{const e=process.env.MONGO_DB_URI;if(!e)throw new Error("DB_URI does not exist in environment variable");return{conn:a.default.createConnection(e)}}catch(t){if(t instanceof a.default.Error.ValidationError){const s=[];for(const n in t.errors)s.push(null===(e=t.errors[n])||void 0===e?void 0:e.message);console.error("Mongoose Error: ",s)}else console.error("Ooops!, something out of normal flow happen :(");return{}}}},188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const t=[];return/^\S*$/.test(e)||t.push("Password must not contain spaces."),/^(?=.*[A-Z]).*$/.test(e)||t.push("Password requires at least one uppercase letter."),/^(?=.*[a-z]).*$/.test(e)||t.push("Password requires at least one lowercase letter."),/^(?=.*\d).*$/.test(e)||t.push("Password requires at least one digit."),/^(?=.*[\W_]).*$/.test(e)||t.push("Password requires at least one special character."),/^.{8,16}$/.test(e)||t.push("Password must be 8-16 Characters Long."),t}},103:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(151)),i=o(s(715)),a=o(s(829)),c=new(s(518).MongoClient)("mongodb+srv://zedcurl1:8vu3UFpUsknGZbr2@merncrud.h6dnvjx.mongodb.net/?retryWrites=true&w=majority&appName=merncrud");t.default=(e,t,s)=>n(void 0,void 0,void 0,(function*(){var n,o;try{const u=e.cookies.access_token,l=e.cookies.refresh_token,d=e.headers.authorization,f=d&&d.split(" ")[1].split(","),p=null===(n=null==f?void 0:f.at(0))||void 0===n?void 0:n.trim(),_=null===(o=null==f?void 0:f.at(1))||void 0===o?void 0:o.trim();if(u||l){const e=yield(0,r.default)(u),n=null==e?void 0:e.verify_access_token_response;if(null==n?void 0:n.ok)return s();if(void 0===l)return t.status(null==n?void 0:n.status).json({authenticated:null==n?void 0:n.ok,message:null==n?void 0:n.statusText,status:null==n?void 0:n.status});const o=yield(0,i.default)(l),a=null==o?void 0:o.refresh_token_data,c=null==o?void 0:o.refresh_token_response;if(!(null==c?void 0:c.ok))return t.status(null==c?void 0:c.status).json({authenticated:null==c?void 0:c.ok,message:null==c?void 0:c.statusText,status:null==c?void 0:c.status});const{access_token:d,expires_in:f}=a;return t.cookie("access_token",d,{httpOnly:!0,secure:!0,sameSite:"none",maxAge:1e3*f}),t.cookie("refresh_token",l,{httpOnly:!0,secure:!0,sameSite:"none"}),s()}if("null"===p||"null"===_)return t.status(401).json({authenticated:!1,message:"No valid token provided",status:401});try{let s=!1;if(a.default.verify(null==_?void 0:_.trim(),process.env.JWT_REFRESH_TOKEN_SECRET,(e=>{s=!e})),s)return t.status(200).json({authenticated:!0,message:"Valid user",status:200});try{yield c.connect();const s=c.db("SessionVerification").collection("userSessionVerification"),n=yield s.findOne({access_token:p,refresh_token:_});if(n){const{access_token:o,refresh_token:r,payload:i}=n;if(_===r){let n,c=!1;if(a.default.verify(_,process.env.JWT_REFRESH_TOKEN_SECRET,((e,t)=>{e&&(c=!1),n=t,c=!0})),!c)return t.status(403).json({authenticated:!1,message:"Invalid token!",status:403});if("string"==typeof n)return t.status(500).json({authenticated:!1,message:"Invalid token payload!",status:500});const u=a.default.sign(i,process.env.JWT_ACCESS_TOKEN_SECRET,{expiresIn:process.env.JWT_LIFETIME}),l=a.default.sign(i,process.env.JWT_REFRESH_TOKEN_SECRET),d={access_token:o,refresh_token:r},f={$set:{access_token:u,refresh_token:l,payload:i,updateAt:new Date}};return s.findOneAndUpdate(d,f),t.status(200).json({authenticated:!0,message:"success",status:200,credential_access_token:e.session.accessToken,credential_refresh_token:e.session.refreshToken})}return t.status(401).json({authenticated:!1,message:"No valid token provided",status:401})}return t.status(401).json({authenticated:!1,message:"No valid token provided",status:401})}catch(e){return t.status(403).json({authenticated:!1,message:"Invalid token!",status:403})}}catch(e){return console.error("Token verification error",e),t.status(500).json({authenticated:!1,message:"Internal server error",status:500})}}catch(e){return console.error(`Error occur in the Middleware: ${e}`),t.status(500).json({message:"Internal server error",status:500})}}))},715:function(e,t){var s=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=process.env.GOOGLE_CLIENT_ID,o=process.env.GOOGLE_CLIENT_SECRET,r=process.env.GOOGLE_ACCESS_TOKEN_URL;t.default=e=>s(void 0,void 0,void 0,(function*(){const t={client_id:n,client_secret:o,refresh_token:e,grant_type:"refresh_token"};try{const e=yield fetch(r,{method:"POST",body:JSON.stringify(t)});return{refresh_token_data:yield e.json(),refresh_token_response:e}}catch(e){console.error(e)}}))},151:function(e,t){var s=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=process.env.GOOGLE_TOKEN_INFO_URL;t.default=e=>s(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${n}?access_token=${e}`);return{verify_access_token_data:yield t.json(),verify_access_token_response:t}}catch(e){console.error(e)}}))},938:e=>{e.exports=require("axios")},729:e=>{e.exports=require("bcryptjs")},479:e=>{e.exports=require("connect-mongo")},898:e=>{e.exports=require("cookie-parser")},577:e=>{e.exports=require("cors")},818:e=>{e.exports=require("dotenv")},252:e=>{e.exports=require("express")},977:e=>{e.exports=require("express-session")},829:e=>{e.exports=require("jsonwebtoken")},518:e=>{e.exports=require("mongodb")},37:e=>{e.exports=require("mongoose")},572:e=>{e.exports=require("nodemailer")},896:e=>{e.exports=require("fs")},928:e=>{e.exports=require("path")}},t={};!function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}(997)})();